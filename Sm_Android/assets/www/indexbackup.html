<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> <html>    <head>        <link rel="stylesheet" type="text/css" href="style.css">        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />        <title>Retrieving table data</title>        <script src="jquery-1.9.1.js"></script>        <script src="jquery-ui-1.10.2.custom.js"></script>        <script src="jquery-ui-1.10.2.custom.min.js"></script>        <script type="text/javascript">            function GetIds(Arg) {                xmlhttp = null;                if (window.XMLHttpRequest) {                    xmlhttp = new XMLHttpRequest();                } else if (window.ActiveXObject) {                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");                }                if (xmlhttp !== null) {                    xmlhttp.onreadystatechange = onStateChangeIds;                    var Url = "http://projects.reviewjournal.com/data/index8.php";                    xmlhttp.open("GET", Url, true);                    xmlhttp.overrideMimeType('application/json');                    xmlhttp.send(null);                } else {                    alert("The XMLHttpRequest not supported");                }            }            function onStateChangeIds() {                if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {                    var orderBody = document.getElementsByTagName("body")[0];                    // creates a <table> element and a <tbody> element                    var orderTable = document.createElement("table");                    var orderTableBody = document.createElement("tbody");                    var jsonResponse = JSON.parse(xmlhttp.responseText);                    var entry = jsonResponse.top;                    // creating all cells                    for (var j = 0; j < entry.length; j++) {                        // creates a table row                        var row = document.createElement("tr");                        // Create a <td> element and a text node, make the text                        // node the contents of the <td>, and put the <td> at                        // the end of the table row                        var cell = document.createElement("td");                        var cellText = document.createTextNode(entry[j].id);                        cell.appendChild(cellText);                        cell.height = '50px';                        cell.width = '200px';                        row.appendChild(cell);                        orderTableBody.appendChild(row);                                            }                    var nodeList = orderTableBody.childNodes;                    //alert("nbr of rows " +  nodeList.length);                    for (var i = 0; i < nodeList.length; i++) {                        nodeList[i].onclick = (function() {// closure                            var cnt = i;                            // save the counter to use in the function                            return function() {                                var p = this.cells[0].innerHTML;                                //alert("#p");                                GetAddresses(p);                            };                        })(i);                    }                    // put the <tbody> in the <table>                    orderTable.appendChild(orderTableBody);                    // appends <table> into <body>                    orderBody.appendChild(orderTable);                    // sets the border attribute of tbl to 2;                    orderTable.setAttribute("border", "2");                    sometext = document.createTextNode("\x00");                    // blank line                    orderBody.appendChild(sometext);                } else {                    //alert("statusText: " + xmlhttp.statusText + "\nHTTP status code: " + xmlhttp.status);                }            }            function GetAddresses(Arg) {                xmlhttp = null;                if (window.XMLHttpRequest) {                    xmlhttp = new XMLHttpRequest();                } else if (window.ActiveXObject) {                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");                }                if (xmlhttp !== null) {                    xmlhttp.onreadystatechange = onStateChangeAddrs;                    var Url = "http://projects.reviewjournal.com/data/index7.php?name=" + Arg;                    xmlhttp.open("GET", Url, true);                    xmlhttp.overrideMimeType('application/json');                    xmlhttp.send(null);                } else {                    alert("The XMLHttpRequest not supported");                }            }            function onStateChangeAddrs() {                if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {                    var aBody = document.getElementsByTagName("body")[0];                    var divTag = document.createElement('div');                    divTag.id = "div1";                    // creates a <table> element and a <tbody> element                    var aTable = document.createElement("table");                    var aTableBody = document.createElement("tBody");                    var jsonResponse = JSON.parse(xmlhttp.responseText);                    var entry = jsonResponse.top;                    // creating all cells                    for (var j = 0; j < entry.length; j++) {                        // creates a table row                        var row = document.createElement("tr");                        // Create a <td> element and a text node, make the text                        // node the contents of the <td>, and put the <td> at                        // the end of the table row                        var cell = document.createElement("td");                        var streetText = document.createTextNode(entry[j].street);                        cell.appendChild(streetText);                        cell.height = '50px';                        cell.width = '300x';                        row.appendChild(cell);                        var cell = document.createElement("td");                        var idAddressText = document.createTextNode(entry[j].idAddress);                        cell.appendChild(idAddressText);                        cell.height = '50px';                        cell.width = '300x';                        row.appendChild(cell);                        aTableBody.appendChild(row);                    }                    var nodeList = aTableBody.childNodes;                    alert("nbr of addresses " + nodeList.length);                    for (var i = 0; i < nodeList.length; i++) {                        nodeList[i].onclick = (function() {// closure                            var cnt = i;                            // save the counter to use in the function                            return function() {                                var str = this.cells[0].innerHTML;                                if (window.confirm('Display map for ' + str)) {                                    var ref = 'navigate.html' + '?id=' + this.cells[1].innerHTML;                                    //var ref = 'map.html' + '?lon=' + longitude + "&lat=" + latitude;													                                    //alert(ref);                                    window.location.href = ref;                                }                            }                        })(i);                    }                    aBody.appendChild(divTag);                    // put the <tbody> in the <table>                    aTable.appendChild(aTableBody);                    // appends <table> into <body>                    aBody.appendChild(aTable);                    // sets the border attribute of tbl to 2;                    aTable.setAttribute("border", "2");                    document.getElementById("div1").appendChild(aTable);                } else {                    //alert("statusText: " + xmlhttp.statusText + "\nHTTP status code: " + xmlhttp.status  + "\nHTTP ready state: " + xmlhttp.readyState);                }            }            function ResetAddresses() {                $('div').remove();            }            function ResetOrders() {                alert("reset orders ");            }            function ResetForm() {                alert("resetting form");                $("table").remove();                $("tableAddress").remove();            }        </script>                    </head>    <body>	                <img src='img/gad_logo.png'  width='200' height='100'>			        <p>            <input type="button" value="Retrieve Order Ids" onclick="GetIds();" style="height:50px; width:200px" >        </p>        <p>            <input type="button" value="Reset addresses" style="height:50px; width:200px" >        </p>		        <p>            <input type="button" value="Reset Form" onclick="ResetForm();" style="height:50px; width:200px" >        </p>	    </body></html>